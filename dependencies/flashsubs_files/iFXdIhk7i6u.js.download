if (self.CavalryLogger) { CavalryLogger.start_js(["IU3TW"]); }

__d('messengerMessageCountReact',['cx','fbt','bs_block','bs_curry','React','numberRe','reasonReact','bs_js_primitive','MercuryThreadInformer'],(function a(b,c,d,e,f,g,h,i){'use strict';var j=c('reasonReact').reducerComponentWithRetainedProps("MessengerMessageCountReact");function k(n,o){if(c('bs_js_primitive').is_nil_undef(n)){return 0;}else return c('bs_js_primitive').undefined_to_opt(n[o]);}function l(n,o,p){return [j[0],j[1],j[2],function(q){var r=q[4],s=+(q[5][0]===n.thread_id);return [s!==0?r[0]:n.message_count,r[1],r[2]];},function(q){var r=q[3],s=c('bs_curry')._1(r,function(x){return c('bs_block').__(0,[x]);}),t=c('bs_curry')._1(r,function(x){return c('bs_block').__(1,[x]);}),u=c('MercuryThreadInformer').getForFBID(o),v=[u.subscribe("messages-received",function(x,y){return c('bs_curry')._1(s,y);})],w=[u.subscribe("messages-reordered",function(x,y){return c('bs_curry')._1(t,y);})];return c('bs_block').__(1,[[q[4][0],v,w]]);},j[5],function(q){var r=q[4],s=r[1];if(s)s[0].unsubscribe();var t=r[2];if(t){t[0].unsubscribe();return 0;}else return 0;},j[7],j[8],function(q){return c('React').createElement("div",{className:"_60oa"},i._("Messages sent:"),c('React').createElement("div",{className:"_397l"},c('reasonReact').element(0,0,c('numberRe').make(q[4][0],[]))));},function(){return [n.message_count,0,0];},[n.thread_id],function(q,r){if(q.tag){var s=k(q[0],n.thread_id);if(s&&s[0].source==="client_delete_messages"){return c('bs_block').__(0,[[r[0]-1|0,r[1],r[2]]]);}else return 0;}else{var t=k(q[0],n.thread_id);if(t){return c('bs_block').__(0,[[r[0]+t[0].length|0,r[1],r[2]]]);}else return 0;}},j[13]];}var m=c('reasonReact').wrapReasonForJs(j,function(n){return l(n.thread,n.viewer,[]);});g.component=j;g.getThreadPayloadFromInform=k;g.make=l;g.jsComponent=m;}),null);