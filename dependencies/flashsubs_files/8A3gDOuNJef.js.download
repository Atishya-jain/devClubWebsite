if (self.CavalryLogger) { CavalryLogger.start_js(["GT5\/L"]); }

__d("messengerMessageSeenHeadsReact",["cx","fbt","cssVar","React","immutable","imageReact","bs_pervasives","reasonReact","joinClasses","bs_js_primitive","MessengerConfig","MercuryTimestamp","MercuryAttachment","MercuryMessageInfo","getViewportDimensions"],(function a(b,c,d,e,f,g,h,i,j){'use strict';var k=c("MessengerConfig").MaxSeenHeadCount;function l(){var p=c("getViewportDimensions")().width;if(p<parseInt("920px".replace("px",""),10)){return c("bs_pervasives").min(k,8);}else if(p<parseInt("1211px".replace("px",""),10)){return c("bs_pervasives").min(k,3);}else return k;}var m=c("reasonReact").statefulComponent("MessengerMessageSeenHeadsReact");function n(p,q,r,s,t,u,v){var w=m.slice();w[9]=function(){if(c("MercuryMessageInfo").isSending(r)||u.isEmpty()||c("MercuryMessageInfo").hasError(r)){return null;}else{var x=c("immutable").Seq(u).filter(function(fa){var ga=+(fa.watermark>=r.timestamp&&fa.watermark<s);if(ga!==0){return true;}else return false;}).sort(function(fa,ga){return fa.action-ga.action|0;});if(x.isEmpty()){return null;}else{var y=q!==0?k:l(0),z=+(x.count()>(y+1|0)),aa=z!==0?x.slice(0,y):x,ba=aa.map(function(fa,ga,ha){var ia=t.get(ga);if(c("bs_js_primitive").is_nil_undef(ia)){return null;}else{var ja=i._("Seen by {full name} at {seen time}",[i.param("full name",ia.name),i.param("seen time",c("MercuryTimestamp").getPreciseTimestamp(fa.action))]);return c("reasonReact").element([c("bs_pervasives").string_of_int(ga)],0,c("imageReact").make(["_jf2"],[ja],[ia.image_src],0,[ja],0,0,[]));}}).toArray(),ca=ba.length;if(ca){var da=z!==0?x.slice(y,undefined).count():0;if(da>0){var ea=x.slice(y,undefined).map(function(fa,ga,ha){var ia=t.get(ga);if(c("bs_js_primitive").is_nil_undef(ia)){return "";}else return ia.name;}).filter(function(fa){var ga=+(fa==="");if(ga!==0){return false;}else return true;}).join("\n")+" ";ba.unshift(c("React").createElement("span",{key:"overflow",className:"_jf3",title:ea},"+"+c("bs_pervasives").string_of_int(da)));}return c("React").createElement("span",{className:c("joinClasses")(p,"_jf4"+(+((ca+da|0)===1)?" "+"_jf5":"")+(+c("MercuryAttachment").isSinglePhotoGroupAttachment(r)?" "+"_ba3":""))},ba);}else return null;}}};return w;}var o=c("reasonReact").wrapReasonForJs(m,function(p){return n(p.className,+p.isFromViewer,p.message,p.nextTimestamp,p.participants,p.readReceipts,[]);});g.maxSeenHeads=k;g.calculateSliceNumber=l;g.component=m;g.make=n;g.jsComponent=o;}),null);