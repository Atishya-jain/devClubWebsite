if (self.CavalryLogger) { CavalryLogger.start_js(["AF3\/U"]); }

__d('MessengerMount',['cx','CSS','ChannelConnection','ChannelManager','CurrentUser','HotLikeSound','mercuryBlockedParticipantsRe','MercuryDelayedRoger','MercuryDeliveryReceipts','MercuryDeliveryState','MercuryOrderedThreadlist','MercuryParticipants','MercuryServerPayloadPreprocessor','MercurySyncEnvironment','MercuryThreads','MercuryThreadIDMap','MercuryUnreadState','MercuryUnseenState','messengerReact','MessengerActions','messengerDialogsRe','MessengerAttributionTagsStore','MessengerComposerActions','MessengerBrowserAlerts','MessengerComposerStore','MessengerConfig','MessengerEnvironment','MessengerMDotMeReferralStore','MessengerPage','MessengerRTCMessageHandler','MessengerSettingsStore','messengerSearchConfirmationDialogReact','MessengerStateStore','MessengerThreadSearchStore','MessengerURIListener','MessengerURIConstants','MessengerURISerializer','MessengerView','MNPlatformTagsDataManager','OmniMStore','React','ReactDOM','MercuryConfig','URI','goURI','OrderedFriendsList','PageHooks'],(function a(b,c,d,e,f,g,h){'use strict';var i=c('MercuryDelayedRoger').get(),j=c('messengerReact').jsComponent,k=c('messengerSearchConfirmationDialogReact').jsComponent;c('OrderedFriendsList');c('PageHooks');c('ChannelManager').startChannelManager();var l={mount:function q(r,s){c('MessengerEnvironment').setMessengerUI(true);c('MessengerPage').emit(c('MessengerPage').Events.JS_LOADED);var t=c('CurrentUser').getID();m(t);n(t);o(t,s);c('MessengerPage').emit(c('MessengerPage').Events.DATA_INITIALIZED);if(document.documentElement)c('CSS').addClass(document.documentElement,"_51l0");if(document.body){var u=document.body;c('CSS').addClass(u,"_z4_");if(c('MessengerConfig').SFFontEnabled)c('CSS').addClass(u,"__6g");if(c('MessengerConfig').SegoeUIDisabled)c('CSS').addClass(u,"_2por");if(c('MessengerEnvironment').facebookdotcom)c('CSS').addClass(u,"_mvg");}c('HotLikeSound').setCheckSoundEnabledFunc(function(){return c('MessengerSettingsStore').getSettings().sound_enabled;});c('ReactDOM').render(c('React').createElement(j,{employeeData:s.employeeData,facebookNotificationTokens:s.facebookNotificationTokens,promotionData:s.promotionData,isFirstRedirect:!c('MercuryConfig').MessengerDotComUser,viewer:t,onMount:p}),r);}};function m(q){i;c('MercuryDeliveryReceipts').getForFBID(q);c('MercuryDeliveryState').getForFBID(q);c('MercuryOrderedThreadlist').getForFBID(q);c('MercuryParticipants');c('mercuryBlockedParticipantsRe').getForFBID(q);c('MercuryThreads').getForFBID(q);c('MercuryUnreadState').getForFBID(q);c('MercuryUnseenState').getForFBID(q);c('MessengerAttributionTagsStore');c('MessengerComposerStore');c('MessengerMDotMeReferralStore');c('MessengerSettingsStore');c('MessengerStateStore');c('MessengerThreadSearchStore').getForFBID(q);}function n(q){c('MessengerURIListener').start();c('MercurySyncEnvironment').setUp();c('MessengerBrowserAlerts').init(q);c('MessengerRTCMessageHandler').init();c('ChannelConnection');c('OmniMStore').setUp();}function o(q,r){var s,t=c('MercuryServerPayloadPreprocessor').getForFBID(q);t.handleUpdate(r.mercuryPayload);var u=new (c('URI'))(window.location.href),v=c('MessengerURISerializer').deserialize(u);if(v.query)(function(){var y=v.masterView===c('MessengerView').MASTER.SEARCH,z=v.query;v.query=null;v.masterView=c('MessengerView').MASTER.RECENT;c('messengerDialogsRe').showDialog(function(){return c('React').createElement(k,{term:z,onSearch:function aa(){c('messengerDialogsRe').removeAllDialogs();y?c('MessengerActions').changeQueryAll(z):c('MessengerActions').changeQuery(z);}});});})();c('goURI')(c('MessengerURISerializer').serialize(v),false,true);if(u.getPath().endsWith(c('MessengerURIConstants').COMPOSE_SUBPATH))return;if(v.masterView===c('MessengerView').MASTER.PAYMENT)return;c('MessengerActions').changeMDotMeReferral(r.mDotMeReferral,r.mDotMeReferralThreadKey);var w=c('MercuryThreadIDMap').get(),x=w.getClientIDFromServerIDNow(r.lastReadThreadKey);if(x){c('MessengerComposerActions').exitComposeState();c('MessengerActions').selectThread(x);}else if(u.getPath()==='/')c('MessengerActions').changeDetailView(c('MessengerView').DETAIL.COMPOSE);c('MNPlatformTagsDataManager').updateThreadTabAfterSelectThread(r.messagingSource,r.mDotMeReferralThreadKey&&r.mDotMeReferralThreadKey.toString());}function p(){c('MessengerPage').emit(c('MessengerPage').Events.APP_MOUNTED);}f.exports=l;}),null);