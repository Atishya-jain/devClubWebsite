if (self.CavalryLogger) { CavalryLogger.start_js(["fz8y8"]); }

__d('createMentionsSearchSourceFromParticipants',['AtSignAllowEmptyMentionsStrategy','CapitalizedNameMentionsStrategy','DocumentCompositeMentionsSource','DocumentMentionsSource','FourLetterMentionsStrategy','LogHistory','SearchableEntry','StaticSearchSource'],(function a(b,c,d,e,f,g){'use strict';var h=c('LogHistory').getInstance('messenger_mentions');function i(j,k,l){if(!j||!k||k.length<=2)return null;var m=k.reduce(function(o,p){if(!p||p.fbid===j)return o;var q=l&&l.custom_nickname&&l.custom_nickname[p.fbid]?l.custom_nickname[p.fbid]:'';o.push(new (c('SearchableEntry'))({uniqueID:p.fbid,title:'@'+p.name,subtitle:q,photo:p.image_src,keywordString:q}));return o;},[]),n=new (c('StaticSearchSource'))(m);h.debug('constructed_search_source',JSON.stringify({participants:k.map(function(o){return o&&o.fbid;})}));return new (c('DocumentCompositeMentionsSource'))([new (c('DocumentMentionsSource'))(c('AtSignAllowEmptyMentionsStrategy'),n),new (c('DocumentMentionsSource'))(c('CapitalizedNameMentionsStrategy'),n),new (c('DocumentMentionsSource'))(c('FourLetterMentionsStrategy'),n)]);}f.exports=i;}),null);