if (self.CavalryLogger) { CavalryLogger.start_js(["vCWlP"]); }

__d('messengerDetailViewHeaderReact',['cx','fbt','bs_curry','Event','React','ReactDOM','debounce','linkReact','RTCConfig','bs_js_boolean','reasonReact','FBRTCSupport','bs_js_primitive','MercuryConfig','WorkModeConfig','bs_js_null_undefined','MercuryThreadInfo','messengerDomIDsRe','archiveWarningReact','MercuryParticipantTypes','mercuryThreadTitleReact','messengerLocalTimeReact','WorkFocusModeController','MessengerJoinableModeType','MessengerWebDriverTestIDs','messengerCustomColorUtilsRe','messengerRTCCallButtonReact','messengerPresenceStatusReact','messengerInfoPanelButtonReact','montageThreadViewContainerReact','messengerCalculateTruncationState'],(function a(b,c,d,e,f,g,h,i){'use strict';var j=c('WorkFocusModeController').MessengerWorkAvailabilityStatus;function k(w){var x=w[0],y=w[1],z=w[2],aa=w[3],ba=w[4],ca=c('bs_js_null_undefined').from_opt(x),da=c('bs_js_null_undefined').from_opt(y),ea=c('bs_js_null_undefined').from_opt(z),fa=c('bs_js_null_undefined').from_opt(aa),ga=c('bs_js_null_undefined').from_opt(ba);return c('messengerCalculateTruncationState')(ca,da,ea,fa,ga);}function l(w,x){x[4][3]=w!==null?[c('ReactDOM').findDOMNode(w)]:0;return 0;}function m(w,x){x[4][1]=w===null?0:[w];return 0;}function n(w,x){x[4][0]=w===null?0:[w];return 0;}function o(w,x){x[4][2]=w===null?0:[w];return 0;}function p(w,x){x[4][4]=w===null?0:[w];return 0;}function q(w,x){if(w.has_montage&&c('MercuryConfig').MontageThreadViewer){return c('React').createElement("div",{ref:c('bs_curry')._1(x[0],p),className:"_1cwz"},c('reasonReact').element(0,0,c('montageThreadViewContainerReact').make(w.thread_id,0,[])));}else return null;}function r(w,x){var y=x.filter(function(ba,ca,da){if(c('bs_js_primitive').is_nil_undef(ba)){return false;}else{var ea=ba.fbid;if(c('bs_js_primitive').is_nil_undef(ea)){return false;}else return c('bs_js_boolean').to_js_boolean(+(ea!==w));}}),z=y.count(),aa=y.first();if(z!==1||aa===undefined){return null;}else return c('reasonReact').element(0,0,c('messengerLocalTimeReact').make("_5eu7",c('bs_js_primitive').null_undefined_to_opt(aa.timezone),[]));}function s(w,x,y){var z=+(c('FBRTCSupport').isWebrtcSupported()&&c('FBRTCSupport').isOSSupported()),aa=w?+(w[0].contact.type===c('MercuryParticipantTypes').PAGE):0,ba=x?+(x[0].joinable_mode===c('MessengerJoinableModeType').JOINABLE):0,ca;if(x){var da=x[0];ca=+(da.participants.length>1)&&+c('MercuryThreadInfo').canReply(da)&&(+da.is_canonical||y&&+c('RTCConfig').RtcConferencingVideoGK||1-y&&c('RTCConfig').RtcConferencingGK);}else ca=0;if(z&&!aa&&!ba){return ca;}else return 0;}var t=c('reasonReact').statefulComponent("MessengerDetailViewHeaderReact");function u(w,x,y,z,aa,ba,ca){var da=function ha(){if(s(w,aa,0)){if(aa){var ia=aa[0],ja=ia.thread_id;return c('React').createElement("li",undefined,c('reasonReact').element(0,0,c('messengerRTCCallButtonReact').make("_30yy",c('messengerCustomColorUtilsRe').customColorOrBlue(ia),0,z,ia,ja,ba,w?w[0].contact.name:"",[])));}else return null;}else return null;},ea=function ha(){if(s(w,aa,1)){if(aa){var ia=aa[0],ja=ia.thread_id;return c('React').createElement("li",undefined,c('reasonReact').element(0,0,c('messengerRTCCallButtonReact').make("_30yy",c('messengerCustomColorUtilsRe').customColorOrBlue(ia),1,z,ia,ja,ba,w?w[0].contact.name:"",[])));}else return null;}else return null;},fa=function ha(){var ia;if(j!==null){var ja=+j.displayFocusBanner(ba,z);ia=ja!==0?[j]:0;}else ia=0;if(ia){return [0,c('React').createElement(ia[0],{className:"_2v6o",viewer:ba,thread:c('bs_js_null_undefined').from_opt(aa),participants:z})];}else if(w){var ka=w[0];return [0,c('reasonReact').element(0,0,c('messengerPresenceStatusReact').make(["_2v6o"],+ka.isUserActive,c('bs_js_primitive').null_undefined_to_opt(ka.lastActive),[ka.platform],[]))];}else return [1,null];},ga=t.slice();ga[4]=function(ha){var ia=ha[4];ia[5]=[c('Event').listen(window,"resize",c('debounce')(function(){return k(ia);},20))];return 0;};ga[5]=function(ha){return k(ha[1][4]);};ga[6]=function(ha){var ia=ha[4][5];if(ia){return ia[0].remove();}else return 0;};ga[9]=function(ha){if(aa){var ia=aa[0],ja=1- +z.isEmpty()&&+z.every(function(ma,na,oa){if(c('bs_js_primitive').is_nil_undef(ma)){return false;}else return ma.employee;}),ka=i._("Conversation information"),la=fa(0);return c('React').createElement("div",{ref:c('bs_curry')._1(ha[0],n),className:"_5742"+(c('bs_js_boolean').to_js_boolean(la[0])?' '+"_1_fz":'')},q(ia,ha),c('React').createElement("div",{key:"threadTitle",ref:c('bs_curry')._1(ha[0],m),className:"_5743"},c('React').createElement("h2",{className:"_17w2",id:c('messengerDomIDsRe').ids.THREAD_TITLE},c('reasonReact').element(0,[c('bs_curry')._1(ha[0],l)],c('mercuryThreadTitleReact').make(["_3oh-"],ia,ba,0,0,0,0,[]))),la[1],r(ba,z)),c('React').createElement("ul",{key:"buttonsContainer",ref:c('bs_curry')._1(ha[0],o),className:"_fl2"},c('React').createElement("li",undefined,c('reasonReact').element(0,0,c('archiveWarningReact').make(+c('WorkModeConfig').is_work_user,ja,[]))),da(0),ea(0),c('React').createElement("li",undefined,c('React').cloneElement(c('reasonReact').element(0,0,c('linkReact').make(0,["_30yy"],0,0,0,[y],0,0,["button"],0,0,0,[ka],[])),{"aria-expanded":x!==0?false:true,"aria-label":ka,"data-testid":c('MessengerWebDriverTestIDs').INFO_PANEL_BUTTON},c('messengerInfoPanelButtonReact').make(c('messengerCustomColorUtilsRe').customColorOrBlue(ia),x)),c('React').createElement("div",{"aria-owns":c('messengerDomIDsRe').ids.THREAD_INFO_PANEL}))));}else return null;};ga[10]=function(){return [0,0,0,0,0,0];};return ga;}var v=c('reasonReact').wrapReasonForJs(t,function(w){return u(c('bs_js_primitive').null_undefined_to_opt(w.contactData),+w.infoPanelCollapsed,w.onInfoPanelToggle,w.participants,c('bs_js_primitive').null_undefined_to_opt(w.thread),w.viewer,[]);});g.messengerWorkAvailabilityStatus_=j;g.calculateTruncationState=k;g.findMercuryTitle=l;g.findTitle=m;g.findRoot=n;g.findButtons=o;g.findMontage=p;g.renderMontageThread=q;g.renderLocalTime=r;g.shouldShowCallButton=s;g.component=t;g.make=u;g.jsComponent=v;}),null);