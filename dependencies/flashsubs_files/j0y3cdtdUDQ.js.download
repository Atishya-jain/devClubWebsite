if (self.CavalryLogger) { CavalryLogger.start_js(["SxXAw"]); }

__d('messengerThreadlistReact',['cx','csx','fbt','bs_array','bs_block','bs_curry','React','Parent','utilsRe','linkReact','bs_caml_array','bs_pervasives','CurrentUser','reasonReact','bs_js_primitive','MessagingTag','MessengerView','MercuryFilters','MessengerActions','MercuryThreadInfo','KeyEventController','SubscriptionsHandler','chatSidebarSheetReact','messengerSpinnerReact','MessengerTypeaheadUtils','MessengerComposerActions','MessengerSearchFunnelLogger','messengerNewMessagesNoticeReact','messengerThreadlistLinkRowReact','messengerFlexScrollableAreaReact','messengerMessageRequestsInfoReact','messengerThreadListGridWrapperReact','messengerGraphQLSearchTypeaheadReact','messengerThreadlistRowContainerReact','messengerThreadlistNewMessageRowReact','messengerThreadlistMessageRequestsRowReact'],(function a(b,c,d,e,f,g,h,i,j){'use strict';function k(ea,fa,ga){if(ga){if(ea.length>0&&fa.length>0){var ha=c('bs_caml_array').caml_array_get(c('bs_caml_array').caml_array_get(ea,0),0),ia=c('bs_caml_array').caml_array_get(c('bs_caml_array').caml_array_get(fa,0),0);if(ha.unread_count>0&&ha.thread_id!==ga[0]&&ha!==ia){return +c('MercuryThreadInfo').isMuted(ha);}else return 0;}else return 0;}else return 0;}function l(ea,fa){var ga=+ea.ctrlKey,ha=+ea.metaKey,ia=+ea.shiftKey,ja=+c('KeyEventController').filterEventTypes(ea,fa),ka=+c('KeyEventController').filterEventTargets(ea,fa),la=c('Parent').bySelector(ea.target,"._150g");if(ga!==0||ha!==0||ia!==0||!(ja!==0&&ka!==0&&la===null)){return 0;}else return 1;}function m(ea){return c('bs_block').__(3,[ea]);}function n(ea,fa,ga){var ha=ga.find(function(ka){var la=ka.length;if(la!==1){if(la!==0&&ea&&c('bs_caml_array').caml_array_get(ka,0).thread_id===ea[0]){return 1;}else return 0;}else{var ma=ka[0];if(ea&&ma.thread_id===ea[0]){return 1;}else return 0;}}),ia=ha!==undefined?ga.indexOf(ha):-1,ja=c('bs_pervasives').min(c('bs_pervasives').max(ia+fa|0,0),ga.length-1|0);return c('bs_caml_array').caml_array_get(c('bs_caml_array').caml_array_get(ga,ja),0).thread_id;}function o(ea){return c('bs_block').__(4,[ea]);}function p(ea,fa){fa.preventDefault();return c('bs_block').__(2,[ea]);}function q(ea){ea.preventDefault();return 4;}function r(){c('MessengerSearchFunnelLogger').startFunnel("WWW_MESSENGER_SEARCH_SESSION_FUNNEL");return 0;}function s(){c('MessengerSearchFunnelLogger').endFunnel("WWW_MESSENGER_SEARCH_SESSION_FUNNEL");return 1;}function t(ea){return c('bs_block').__(0,[ea.target.value]);}function u(ea,fa){var ga=fa[4][6];if(ga){c('MessengerTypeaheadUtils').scrollEntryIntoView(ea,ga[0]);return 0;}else return 0;}function v(ea){ea.preventDefault();c('MessengerActions').changeFolder(c('MessagingTag').OTHER);return 0;}function w(ea){ea.preventDefault();c('MessengerActions').changeFolder(c('MessagingTag').INBOX);c('MessengerActions').changeFilter(c('MercuryFilters').ALL);return 0;}function x(ea,fa){return c('reasonReact').element([c('bs_caml_array').caml_array_get(fa,0).thread_id],0,c('messengerThreadlistMessageRequestsRowReact').make([],fa,ea,[]));}function y(ea,fa,ga,ha){var ia=ga[4],ja=ea&&ea[0]===ha.thread_id?1:0,ka=ia[0],la=ka?1:0,ma=ia[0],na=ma&&ma[0]===ha.thread_id?1:0,oa=ja!==0?la!==0&&na===0?0:1:na!==0?1:0;return c('reasonReact').element([ha.thread_id],0,c('messengerThreadlistRowContainerReact').make([ja],[na],[ia[2]],[oa],c('bs_curry')._1(ga[3],m),c('bs_curry')._1(ga[0],u),ha,fa,[]));}function z(ea){return c('bs_block').__(1,[ea!==null?[ea]:0]);}function aa(ea,fa){var ga=ea[1],ha=ea[0];c('MessengerActions').selectThread(ha,ga);c('MessengerSearchFunnelLogger').logResultSelection("WWW_MESSENGER_SEARCH_SESSION_FUNNEL",fa[4][3],ha,ga);return 0;}var ba=c('reasonReact').reducerComponentWithRetainedProps("MessengerThreadlistReact");function ca(ea,fa,ga,ha,ia,ja,ka,la,ma,na,oa,pa,qa,ra,sa){var ta=function ab(bb,cb,db){var eb=db[5],fb=eb[0],gb=typeof bb==="number"?bb!==0?fb.length-1|0:(-fb.length|0)-1|0:bb[0],hb=+cb.altKey,ib=c('Parent').bySelector(cb.target,"._4rv3"),jb=db[4][0],kb=c('Parent').bySelector(cb.target,"._1ht1"),lb=0;if(hb!==0){if(ib!==null){var mb=eb[4];if(mb!==0){if(gb===1&&fb.length>0){c('MessengerActions').selectThread(c('bs_caml_array').caml_array_get(c('bs_caml_array').caml_array_get(fb,0),0).thread_id,null);return 0;}else return 0;}else{var nb=fb.findIndex(function(pb){if(pb.length!==1){return 0;}else{var qb=pb[0],rb=eb[2];if(rb&&rb[0]===qb.thread_id){return 1;}else return 0;}});if(nb!==-1){var ob=c('bs_caml_array').caml_array_get(fb,nb+gb|0);c('MessengerActions').selectThread(c('bs_caml_array').caml_array_get(ob,0).thread_id);if(eb[1]&&nb===0&&gb===-1)c('MessengerActions').changeDetailView(c('MessengerView').DETAIL.COMPOSE);if(nb===(fb.length-1|0)){return c('bs_curry')._1(eb[3],0);}else return 0;}else return 0;}}else lb=1;}else lb=1;if(lb===1)if(jb&&kb!==null){cb.preventDefault();return c('bs_curry')._2(db[3],o,gb);}else return 0;},ua=function ab(){c('MessengerSearchFunnelLogger').logClearQuery("WWW_MESSENGER_SEARCH_SESSION_FUNNEL");if(fa)c('bs_curry')._1(fa[0],0);return 2;},va=function ab(){return 3;},wa=function ab(bb,cb){bb.stopPropagation();c('MessengerComposerActions').exitComposeState();if(la){var db=qa.find(function(eb){var fb=eb.length;if(fb!==1){if(fb!==0){return +(c('bs_js_primitive').undefined_to_opt(eb.find(function(hb){return +(hb.unread_count===0);}))===0);}else return 0;}else{var gb=eb[0];return +(gb.unread_count===0);}});c('MessengerActions').selectThread(db!==undefined?c('bs_caml_array').caml_array_get(db,0).thread_id:null,null);return 0;}else return 0;},xa=function ab(bb,cb){bb.preventDefault();return c('bs_curry')._1(na,0);},ya=function ab(bb,cb,db){var eb=0,fb=0;if(bb){if(bb[0]!==0){return null;}else fb=2;}else fb=2;if(fb===2)if(cb){if(cb[0]!==0){return c('React').createElement("div",{className:"_19hf"},c('reasonReact').element(0,0,c('messengerSpinnerReact').make(0,0,0,[])));}else eb=1;}else eb=1;if(eb===1)return c('React').createElement("div",{className:"_19hf"},c('reasonReact').element(0,0,c('linkReact').make(0,0,0,0,["#"],[c('bs_curry')._1(db[0],xa)],0,0,0,0,[-1],0,0,[j._("Show older")])));},za=function ab(bb){if(qa.length){return c('reasonReact').element(0,0,c('messengerThreadListGridWrapperReact').make(j._("Conversation list"),[c('bs_array').map(function(gb){if(gb.length!==1){return x(ra,gb);}else{var hb=gb[0];return y(ea,ra,bb,hb);}},qa)]));}else{var cb;if(ha===c('MessagingTag').INBOX){var db=+(ga===c('MercuryFilters').UNREAD);cb=db!==0?j._("No unread messages found."):j._("No messages found.");}else cb=ha===c('MessagingTag').PENDING?j._("No message requests found."):j._("No filtered requests found.");var eb=+(ha!==c('MessagingTag').INBOX||ga!==c('MercuryFilters').ALL),fb=eb!==0?c('reasonReact').element(0,0,c('linkReact').make(0,0,0,0,0,[w],0,0,0,0,0,0,0,[j._("Return to inbox.")])):null;return c('React').createElement("div",{className:"_3blk"},cb,c('React').createElement("div",{className:"_3bll"},fb));}};return [ba[0],ba[1],ba[2],function(ab){var bb=ab[4],cb=bb[6],db=cb?+cb[0].isScrolledToTop():0,eb=k(qa,ab[5][0],ea),fb=0;if(db!==0){fb=1;}else if(eb!==0){if(oa){var gb=oa[0],hb=+(gb.length===0);return [bb[0],bb[1],bb[2],hb!==0?gb:bb[3],1,bb[5],bb[6]];}else return bb;}else fb=1;if(fb===1)if(oa){var ib=oa[0],jb=+(ib.length===0);return [bb[0],bb[1],bb[2],jb!==0?ib:bb[3],bb[4]&&1-db,bb[5],bb[6]];}else return bb;},function(ab){var bb=new (c('SubscriptionsHandler'))(),cb=[-1],db=[1],eb=[-5],fb=[5];bb.addSubscriptions(c('KeyEventController').registerKey("UP",c('bs_curry')._1(ab[0],function(hb,ib){return ta(cb,hb,ib);}),l),c('KeyEventController').registerKey("DOWN",c('bs_curry')._1(ab[0],function(hb,ib){return ta(db,hb,ib);}),l),c('KeyEventController').registerKey("PAGE_UP",c('bs_curry')._1(ab[0],function(hb,ib){return ta(eb,hb,ib);})),c('KeyEventController').registerKey("PAGE_DOWN",c('bs_curry')._1(ab[0],function(hb,ib){return ta(fb,hb,ib);})),c('KeyEventController').registerKey("HOME",c('bs_curry')._1(ab[0],function(hb,ib){return ta(0,hb,ib);})),c('KeyEventController').registerKey("END",c('bs_curry')._1(ab[0],function(hb,ib){return ta(1,hb,ib);})),c('KeyEventController').registerKey("LEFT",c('bs_curry')._1(ab[3],function(hb){return p(0,hb);})),c('KeyEventController').registerKey("RIGHT",c('bs_curry')._1(ab[3],function(hb){return p(1,hb);})));var gb=ab[4].slice();return c('bs_block').__(1,[(gb[5]=[bb],gb)]);},function(ab){var bb=ab[1],cb=ab[0],db=+(bb[4][1]!==cb[4][1]),eb=ia&&1-cb[5][1],fb=bb[4][6];if(db!==0&&eb!==0&&fb){fb[0].scrollToTop();return 0;}else return 0;},function(ab){var bb=ab[4][5];if(bb){bb[0].release();return 0;}else return 0;},ba[7],ba[8],function(ab){var bb=ab[4],cb=bb[4]&&1-bb[1],db=j._("Conversations"),eb=oa?1:0,fb=function mb(nb,ob){return c('bs_curry')._2(ab[0],aa,[nb,ob]);},gb=+(ha===c('MessagingTag').INBOX),hb;if(gb!==0){var ib=+c('CurrentUser').isWorkUser();hb=c('reasonReact').element(0,0,c('messengerGraphQLSearchTypeaheadReact').make("_5iwm"+(bb[1]||+(bb[3].length>0)?' '+"_5iwn":'')+(' '+"_150g"),1,0,0,0,[+(bb[3]==="")&&1-eb],[eb],[bb[1]],c('bs_curry')._1(ab[3],s),c('bs_curry')._1(ab[3],t),c('bs_curry')._1(ab[3],ua),c('bs_curry')._1(ab[3],r),c('bs_curry')._1(ab[0],u),fb,ib!==0?j._("Search Work Chat"):j._("Search Messenger"),[bb[3]],1,1,"_11_d",ra,[]));}else hb=null;var jb=+(ha===c('MessagingTag').PENDING),kb=+(ha===c('MessagingTag').INBOX&&ma.length>0),lb=+(ha===c('MessagingTag').PENDING);return c('React').createElement("div",{className:"_2xhi"},c('reasonReact').element(0,0,c('chatSidebarSheetReact').make("_p0g",[])),c('reasonReact').element(0,0,c('messengerNewMessagesNoticeReact').make(cb,c('bs_curry')._1(ab[3],q),0,[])),c('reasonReact').element(0,[c('bs_curry')._1(ab[3],z)],c('messengerFlexScrollableAreaReact').make([c('bs_curry')._1(ab[3],va)],[hb,jb!==0?c('reasonReact').element(0,0,c('messengerMessageRequestsInfoReact').make([])):null,c('React').cloneElement(c('React').createElement("div",{className:bb[1]&&1-eb?"accessible_elem":'',role:"navigation"}),{"aria-label":db},kb!==0?c('reasonReact').element(0,0,c('messengerThreadlistMessageRequestsRowReact').make(ma,[],ra,[])):null,ia!==0?c('reasonReact').element(0,0,c('messengerThreadlistNewMessageRowReact').make(la,c('bs_curry')._1(ab[0],wa),[])):null,za(ab),lb!==0?c('messengerThreadlistLinkRowReact').make(v):null,pa?c('bs_curry')._1(pa[0],0):ya(ja,ka,ab))])));},function(){return [0,0,0,"",0,0,0];},[qa,ia,ea,na,la],function(ab,bb){if(typeof ab==="number"){switch(ab){case 0:var cb=bb.slice();return c('bs_block').__(0,[(cb[1]=1,cb)]);case 1:return c('bs_block').__(0,[[bb[0],0,bb[2],"",bb[4],bb[5],bb[6]]]);case 2:var db=bb.slice();return c('bs_block').__(0,[(db[3]="",db)]);case 3:if(bb[1]){return 0;}else{var eb=bb[6];if(eb){var fb=eb[0],gb=+fb.isScrolledToBottom(),hb=+fb.isScrolledToTop(),ib=bb[4];if(gb!==0){var jb=0;if(hb!==0){if(ib!==0){var kb=bb.slice();return c('bs_block').__(4,[(kb[4]=0,kb),function(){return c('bs_curry')._1(na,0);}]);}else jb=1;}else jb=1;if(jb===1)return c('bs_block').__(2,[function(){return c('bs_curry')._1(na,0);}]);}else if(hb!==0){if(ib!==0){var lb=bb.slice();return c('bs_block').__(0,[(lb[4]=0,lb)]);}else return 0;}else return 0;}else return 0;}break;case 4:var mb=bb.slice();return c('bs_block').__(4,[(mb[4]=0,mb),function(sb){var tb=sb[6];if(tb){tb[0].scrollToTop();return 0;}else return 0;}]);}}else switch(ab.tag|0){case 0:var nb=bb.slice();return c('bs_block').__(0,[(nb[3]=ab[0],nb)]);case 1:var ob=bb.slice();return c('bs_block').__(1,[(ob[6]=ab[0],ob)]);case 2:var pb=bb.slice();return c('bs_block').__(0,[(pb[2]=ab[0],pb)]);case 3:var qb=bb.slice();return c('bs_block').__(0,[(qb[0]=[ab[0]],qb)]);case 4:var rb=bb.slice();return c('bs_block').__(0,[(rb[0]=[n(bb[0],ab[0],qa)],rb)]);}},ba[13]];}var da=c('reasonReact').wrapReasonForJs(ba,function(ea){var fa=c('utilsRe').nullUndefinedBooleanToOptionBool(ea.isComposing);return ca(c('bs_js_primitive').null_undefined_to_opt(ea.activeThreadID),c('bs_js_primitive').null_undefined_to_opt(ea.clearQuery),ea.filter,ea.folder,fa?fa[0]:0,c('utilsRe').nullUndefinedBooleanToOptionBool(ea.isLoaded),c('utilsRe').nullUndefinedBooleanToOptionBool(ea.isLoading),+ea.isNewMessageActive,ea.newMessageRequestThreads,ea.onLoadMoreRequest,c('bs_js_primitive').null_undefined_to_opt(ea.queryString),c('bs_js_primitive').null_undefined_to_opt(ea.renderLoadMore),c('bs_array').map(function(ga){return [].concat(ga);},ea.threads),ea.viewer,[]);});g.hasNewUnreadMessages=k;g.filterKeyEvent=l;g.handleThreadFocus=m;g.getFocusedThreadId=n;g.updateThreadFocus=o;g.handleActionsFocus=p;g.handleNewMessageNoticeClick=q;g.handleFocus=r;g.handleBlur=s;g.handleChange=t;g.handleScrollIntoView=u;g.handleFilteredRequestsClick=v;g.handleReturnToInboxClick=w;g.renderAggregatedRequests=x;g.renderThread=y;g.setScrollable=z;g.handleSelect=aa;g.component=ba;g.make=ca;g.jsComponent=da;}),null);