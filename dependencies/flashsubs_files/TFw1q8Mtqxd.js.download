if (self.CavalryLogger) { CavalryLogger.start_js(["vKwZv"]); }

__d('messengerSettingsDialogReact',['cx','fbt','bs_array','bs_block','bs_curry','React','linkReact','bs_js_boolean','MercuryIDs','CurrentUser','reasonReact','EmojiActions','bs_js_primitive','EmojiStateStore','PresencePrivacy','messengerDialogsRe','MercuryParticipants','messengerDialogReact','SubscriptionsHandler','messengerSpinnerReact','MessengerSettingsStore','MessengerSettingsActions','messengerViewerCardReact','messengerCheckboxInputReact','MessengerDesktopNotifications','chatEmojiSkinTonePreferencePickerReact'],(function a(b,c,d,e,f,g,h,i){'use strict';var j=c('reasonReact').statefulComponent("MessengerSettingsDialogReact");function k(y){if(y){return 0;}else return c('messengerDialogsRe').removeDialog(0);}function l(){return c('messengerDialogsRe').removeDialog(0);}function m(y,z){var aa=z[4][1];c('PresencePrivacy').setVisibility(aa!==0?c('PresencePrivacy').OFFLINE:c('PresencePrivacy').ONLINE);return 0;}function n(y,z){var aa=y[2];if(aa){return c('reasonReact').element(0,0,c('messengerViewerCardReact').make(["_3xld"],y[1],[c('bs_curry')._1(z,m)],[aa[0]],[]));}else return c('reasonReact').element(0,0,c('messengerSpinnerReact').make(0,0,0,[]));}function o(y,z){var aa=z[4].slice();return c('bs_block').__(0,[(aa[4]=1,aa)]);}function p(y,z){c('MessengerSettingsActions').changeDesktopNotifs(c('bs_js_boolean').to_js_boolean(1- +z[4][3].desktopNotifsEnabled),c('bs_curry')._1(z[1],o));return 0;}function q(y){var z=y[4];if(z[4]){return i._("You can allow Messenger to send you desktop notifications from your browser preferences.");}else return c('bs_array').of_list([c('reasonReact').element(["notifications-checkox"],0,c('messengerCheckboxInputReact').make(+z[3].desktopNotifsEnabled&&z[5],c('bs_curry')._1(y[0],p),[])),[c('React').createElement("span",{key:"notifications-checkbox-label",className:"_1pr_"},i._("Desktop notifications enabled")),0]]);}function r(y){if(c('MessengerDesktopNotifications').isSupported()){return c('React').createElement("div",{className:"_374b"+(y[4][4]?' '+"_2bd0":'')},c('React').createElement("div",{className:"_374c"},i._("Notifications")),c('React').createElement("div",{className:"_374d"},q(y)));}else return null;}function s(){if(c('CurrentUser').isWorkUser()){return null;}else return c('React').createElement("div",{className:"_374b"},c('React').createElement("div",{className:"_374c"},i._("Payments")),c('React').createElement("div",{className:"_374d"},c('reasonReact').element(0,0,c('linkReact').make(0,0,0,0,["https://secure.facebook.com/settings?tab=payments&ref=messengerdotcom_settings"],0,0,0,0,0,0,["_blank"],0,[i._("Manage on Facebook")]))));}function t(){if(c('CurrentUser').isWorkUser()){return null;}else return c('React').createElement("div",{className:"_374b"},c('React').createElement("div",{className:"_374c"},i._("Blocking")),c('React').createElement("div",{className:"_374d"},c('reasonReact').element(0,0,c('linkReact').make(0,0,0,0,["https://www.facebook.com/settings?tab=blocking"],0,0,0,0,0,0,["_blank"],0,[i._("Manage on Facebook")]))));}function u(y,z){var aa=z[4][0];if(aa){if(y!==aa[0]){c('EmojiActions').changeEmojiColor(y);return 0;}else return 0;}else{c('EmojiActions').changeEmojiColor(y);return 0;}}function v(y){var z=y[4][0];if(z){return c('reasonReact').element(0,0,c('chatEmojiSkinTonePreferencePickerReact').make(z[0],c('bs_curry')._1(y[0],u),[]));}else return c('reasonReact').element(0,0,c('messengerSpinnerReact').make(0,0,0,[]));}function w(y){var z=y.target;c('MessengerSettingsActions').changeSettings({sound_enabled:z.checked});return 0;}function x(y,z){var aa=function ca(da,ea){return c('bs_block').__(0,[[[c('EmojiStateStore').getState().emojiColor],+(c('PresencePrivacy').getVisibility()===c('PresencePrivacy').ONLINE),c('bs_js_primitive').null_undefined_to_opt(c('MercuryParticipants').getOrFetch(c('MercuryIDs').getParticipantIDFromUserID(y))),c('MessengerSettingsStore').getSettings(),+c('MessengerDesktopNotifications').isDenied(),+c('MessengerDesktopNotifications').isGranted(),ea[4][6]]]);},ba=j.slice();ba[4]=function(ca){var da=ca[1],ea=new (c('SubscriptionsHandler'))();ea.addSubscriptions(c('PresencePrivacy').subscribe("privacy-changed",c('bs_curry')._1(da,aa)),c('PresencePrivacy').subscribe("privacy-user-presence-changed",c('bs_curry')._1(da,aa)),c('MessengerSettingsStore').addListener("change",c('bs_curry')._1(da,aa)),c('EmojiStateStore').addListener(c('bs_curry')._1(da,aa)),c('MercuryParticipants').addListener("change",c('bs_curry')._1(da,aa)));var fa=ca[4].slice();return c('bs_block').__(1,[(fa[6]=[ea],fa)]);};ba[6]=function(ca){var da=ca[4][6];if(da){da[0].release();return 0;}else return 0;};ba[9]=function(ca){var da=ca[4];return c('reasonReact').element(0,0,c('bs_curry')._8(c('messengerDialogReact').Dialog[0],0,k,0,0,0,["default"],[544],[c('reasonReact').element(0,0,c('bs_curry')._3(c('messengerDialogReact').Header[0],0,0,[c('reasonReact').element(0,0,c('bs_curry')._2(c('messengerDialogReact').Title[0],0,[i._("Settings")])),c('reasonReact').element(0,0,c('bs_curry').app(c('messengerDialogReact').Button[0],[0,[i._("Done")],0,0,[l],[0],0,0,[]]))])),c('React').createElement("div",{className:"_374b"},c('React').createElement("div",{className:"_374c"},i._("Account")),c('React').createElement("div",{className:"_374d"},n(da,ca[0]))),c('React').createElement("div",{className:"_374b"},c('React').createElement("div",{className:"_374c"},i._("Sounds")),c('React').createElement("div",{className:"_374d"},c('reasonReact').element(0,0,c('messengerCheckboxInputReact').make(+da[3].sound_enabled,w,[])),c('React').createElement("span",{className:"_1pr_"},i._("Enabled")))),r(ca),s(0),t(0),c('React').createElement("div",{className:"_374b"},c('React').createElement("div",{className:"_374c"},i._("Emoji")),c('React').createElement("div",{className:"_374d _5jb0"},v(ca)))]));};ba[10]=function(){return [[c('EmojiStateStore').getState().emojiColor],+(c('PresencePrivacy').getVisibility()===c('PresencePrivacy').ONLINE),c('bs_js_primitive').null_undefined_to_opt(c('MercuryParticipants').getOrFetch(c('MercuryIDs').getParticipantIDFromUserID(y))),c('MessengerSettingsStore').getSettings(),+c('MessengerDesktopNotifications').isDenied(),+c('MessengerDesktopNotifications').isGranted(),0];};return ba;}g.component=j;g.handleToggle=k;g.handleDone=l;g.handleTogglePresence=m;g.renderAccountSection=n;g.handleDenied=o;g.handleNotificationsChange=p;g.renderNotificationsContent=q;g.renderNotificationsSection=r;g.renderPaymentsSection=s;g.renderBlockingSection=t;g.handleChooseEmojiColor=u;g.renderEmojiColorSection=v;g.handleSoundChange=w;g.make=x;}),null);