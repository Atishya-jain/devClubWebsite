if (self.CavalryLogger) { CavalryLogger.start_js(["W9Rp2"]); }

__d('MNCommerceReceiptActions',['MessengerDispatcher','MNCommerceActionTypes'],(function a(b,c,d,e,f,g){'use strict';var h={receiptLoaded:function i(j){c('MessengerDispatcher').dispatch({type:c('MNCommerceActionTypes').RECEIPT.LOADED,receipt:j});},receiptLoadError:function i(j){c('MessengerDispatcher').dispatch({type:c('MNCommerceActionTypes').RECEIPT.LOAD_ERROR,receiptID:j});},receiptReload:function i(j){c('MessengerDispatcher').dispatch({type:c('MNCommerceActionTypes').RECEIPT.RELOAD,receiptID:j});}};f.exports=h;}),null);
__d('MNCommerceDetailSection.react',['cx','React'],(function a(b,c,d,e,f,g,h){'use strict';var i,j,k=c('React').PropTypes;i=babelHelpers.inherits(l,c('React').Component);j=i&&i.prototype;l.prototype.render=function(){return c('React').createElement('div',{className:this.props.className},c('React').createElement('div',{className:"_49u5",style:{marginBottom:this.props.margin}},this.props.headerLabel),this.props.children);};function l(){i.apply(this,arguments);}l.propTypes={headerLabel:k.string.isRequired,margin:k.number};l.defaultProps={margin:0};f.exports=l;}),null);
__d('MNAirlineItineraryDetailsDialog.react',['cx','LeftRight.react','MNAirlineAirportLocations.react','MNAirlineAttachmentTypes','MNAirlineGrid.react','MNAirlineLabels','MNAirlinePassengerList.react','MNAirlinePassengerListConfigs','MNCommerceDetailSection.react','MNCommerceDetailsDialog.react','MNCommerceLogoHeader.react','MercuryShareAttachmentRenderLocations','React'],(function a(b,c,d,e,f,g,h){'use strict';var i,j,k=c('React').PropTypes;i=babelHelpers.inherits(l,c('React').Component);j=i&&i.prototype;function l(){var m,n;for(var o=arguments.length,p=Array(o),q=0;q<o;q++)p[q]=arguments[q];return n=(m=j.constructor).call.apply(m,[this].concat(p)),this.$MNAirlineItineraryDetailsDialog1=function(){if(!this.props.itinerary||this.props.error||this.props.loading)return null;var r=this.props.itinerary,s=r.labels;return [c('React').createElement('div',{className:"_4r67",key:'header',style:{backgroundColor:r.theme_color}},c('React').createElement(c('MNCommerceLogoHeader.react'),{logo:r.logo,logoPosition:'left',childPosition:'right'},c('React').createElement('div',{className:"_4ifn"},s.booking_number_label),c('React').createElement('div',{className:"_4ifn"},r.confirmation_number))),c('React').createElement('div',{className:"_4r69",key:'body'},c('React').createElement('div',null,this.$MNAirlineItineraryDetailsDialog2(r)),c('React').createElement(c('MNCommerceDetailSection.react'),{className:"_4r6d _2zuc",headerLabel:s.purchase_summary_label},this.$MNAirlineItineraryDetailsDialog3(r)))];}.bind(this),this.$MNAirlineItineraryDetailsDialog4=function(r){var s=[];r.passenger_seat_assignment.forEach(function(t){var u=t.name;s.push(c('React').createElement(c('LeftRight.react'),{key:u},u,t.ticket_number));});return c('React').createElement('div',null,s);},this.$MNAirlineItineraryDetailsDialog3=function(r){var s=r.labels,t=r.price_info,u=t.map(function(v){return this.$MNAirlineItineraryDetailsDialog5(v.title,v.value);}.bind(this));return c('React').createElement('div',{className:"_4r6f"},u,this.$MNAirlineItineraryDetailsDialog5(s.base_price_label,r.base_cost),this.$MNAirlineItineraryDetailsDialog5(s.taxes_label,r.tax),c('React').createElement('div',{className:"_4r6l"},this.$MNAirlineItineraryDetailsDialog5(s.total_label,r.total_cost)));}.bind(this),this.$MNAirlineItineraryDetailsDialog2=function(r){var s=r.labels;return r.flight_segments.map(function(t,u){var v=t.flight_info,w=t.passenger,x=this.$MNAirlineItineraryDetailsDialog6(v,s),y=c('MNAirlinePassengerListConfigs')[c('MNAirlineAttachmentTypes').ITINERARY],z=w.length>1?s.passenger_names_label:s.passenger_name_label;y=c('MNAirlinePassengerListConfigs').getTranslatedString([z,s.passenger_seat_label],y);return c('React').createElement('div',{className:"_4r6f",key:u},c('React').createElement(c('MNAirlineAirportLocations.react'),{className:"_4r6d",destinationAirportCode:v.arrival_airport.airport_code,destinationAirportCity:v.arrival_airport.city,fontSize:'large',sourceAirportCode:v.departure_airport.airport_code,sourceAirportCity:v.departure_airport.city,themeColor:r.theme_color}),c('React').createElement(c('MNAirlineGrid.react'),{data:x,dataClassName:"_52x-"+(this.props.location===c('MercuryShareAttachmentRenderLocations').MESSENGER?' '+"_2zud":''),gridConfig:this.$MNAirlineItineraryDetailsDialog7(s,x),headerClassName:"_49u5"}),c('React').createElement(c('MNAirlinePassengerList.react'),{className:"_3-8z _4r6d",cellClassName:"_52x-",columnConfig:y,extraInfoCellClassName:"_4r6n",headerCellClassName:"_49u5",passengerInfo:w}));}.bind(this));}.bind(this),this.$MNAirlineItineraryDetailsDialog7=function(r,s){var t=[c('MNAirlineLabels').getAirlineLabel(r.flight_label),c('MNAirlineLabels').getAirlineLabel(r.departure_time_label),c('MNAirlineLabels').getAirlineLabel(r.arrival_time_label),c('MNAirlineLabels').getAirlineLabel(r.flight_date_label)];if(s[r.flight_terminal_label])t.push(c('MNAirlineLabels').getAirlineLabel(r.flight_terminal_label));t.push(c('MNAirlineLabels').getAirlineLabel(r.aircraft_type_label));return t;},this.$MNAirlineItineraryDetailsDialog6=function(r,s){var t={};t[s.flight_label]=r.flight_number;t[s.arrival_time_label]=r.arrival_time;t[s.departure_time_label]=r.departure_time;t[s.flight_date_label]=r.departure_date;t[s.aircraft_type_label]=r.aircraft_type;t[s.flight_terminal_label]=r.departure_airport.terminal;return t;},this.$MNAirlineItineraryDetailsDialog5=function(r,s){if(s===null||s===undefined)return null;return c('React').createElement(c('LeftRight.react'),{key:r+s},r,s);},n;}l.prototype.render=function(){if(!this.props.itinerary||this.props.error||this.props.loading)return null;var m=this.props.itinerary,n=m.labels,o=n.itinerary_title_label,p=n.itinerary_error_title_label;return c('React').createElement(c('MNCommerceDetailsDialog.react'),babelHelpers['extends']({errorMessage:p,title:o},this.props),this.$MNAirlineItineraryDetailsDialog1());};l.propTypes={error:k.object,itinerary:k.object,location:k.oneOf(c('MercuryShareAttachmentRenderLocations').getValues()),loading:k.bool.isRequired,onTryAgain:k.func,shown:k.bool.isRequired};l.defaultProps={shown:false};f.exports=l;}),null);
__d('MNCommerceFooterTypes',['keyMirror'],(function a(b,c,d,e,f,g){var h=c('keyMirror')({TOTAL:null,REFUND:null});f.exports=h;}),null);
__d('leftRightReact',['reasonReact','LeftRight.react','bs_js_null_undefined'],(function a(b,c,d,e,f,g){'use strict';function h(i,j){return c('reasonReact').wrapJsForReason(c('LeftRight.react'),{className:c('bs_js_null_undefined').from_opt(i)},j);}g.make=h;}),null);
__d("mNCommerceTotalCostFooterReact",["cx","fbt","React","reasonReact","joinClasses","leftRightReact","MNCommerceFooterTypes"],(function a(b,c,d,e,f,g,h,i){'use strict';var j=c("reasonReact").statelessComponent("MNCommerceTotalCostFooter");function k(m,n,o,p,q){var r=j.slice();r[9]=function(){var s=m===c("MNCommerceFooterTypes").TOTAL?[i._("Total"),"_28k2"]:m===c("MNCommerceFooterTypes").REFUND?[i._("Refund"),"_28k3"]:["",""],t=s[1],u=s[0],v=p!==undefined?c("joinClasses")(t,p):c("joinClasses")(t);return c("reasonReact").element(0,0,c("leftRightReact").make([v],[c("React").createElement("div",undefined,o!==undefined&&o.length?o:u),c("React").createElement("div",{className:"_28k4"},n)]));};return r;}var l=c("reasonReact").wrapReasonForJs(j,function(m){return k(m.type_,m.totalCost,m.costLabel,m.className,[]);});g.component=j;g.make=k;g.jsComponent=l;}),null);
__d('MNAirlineItineraryMercuryAttachment.react',['cx','Link.react','MercuryFallbackShareAttachment.react','MercuryShareAttachmentRenderLocations','MercuryShareAttachmentReactShape','MNAirlineAirportLocations.react','MNAirlineAttachmentTypes','MNAirlineItineraryDetailsDialog.react','MNAirlinePassengerList.react','MNAirlinePassengerListConfigs','MNCommerceLogoHeader.react','MNCommerceFooterTypes','mNCommerceTotalCostFooterReact','React'],(function a(b,c,d,e,f,g,h){'use strict';var i,j,k=c('mNCommerceTotalCostFooterReact').jsComponent,l=c('React').PropTypes;i=babelHelpers.inherits(m,c('React').Component);j=i&&i.prototype;function m(){var n,o;for(var p=arguments.length,q=Array(p),r=0;r<p;r++)q[r]=arguments[r];return o=(n=j.constructor).call.apply(n,[this].concat(q)),this.state={dialogShown:false},this.$MNAirlineItineraryMercuryAttachment1=function(){this.setState({dialogShown:true});}.bind(this),this.$MNAirlineItineraryMercuryAttachment2=function(s){this.setState({dialogShown:s});}.bind(this),this.$MNAirlineItineraryMercuryAttachment3=function(s,t){if(!this.props.attachment||!this.props.attachment.target)return null;var u=this.props.attachment.target,v=u.connections,w=[];for(var x=0;x<v.length;x++)w.push(c('React').createElement('div',{key:x,className:"_52y0"},c('React').createElement('div',{className:"_itq"},v[x].labels),c('React').createElement('div',null,v[x].departure_datetime_for_display),c('React').createElement(c('MNAirlineAirportLocations.react'),{className:"_itr",destinationAirportCity:v[x].destination_airport_name,destinationAirportCode:v[x].destination_airport_code,fontSize:this.props.location===c('MercuryShareAttachmentRenderLocations').CHAT?'small':'large',sourceAirportCity:v[x].source_airport_name,sourceAirportCode:v[x].source_airport_code,themeColor:s})));return w;}.bind(this),o;}m.prototype.render=function(){if(!this.props.attachment||!this.props.attachment.target)return c('React').createElement(c('MercuryFallbackShareAttachment.react'),this.props);var n=this.props.attachment.target,o=n.labels,p=n.theme_color||'black',q=n.passenger_names.map(function(u){return {name:u};}),r=q.length>1?o.passenger_names_label:o.passenger_name_label,s=c('MNAirlinePassengerListConfigs')[c('MNAirlineAttachmentTypes').CONFIRMATION];s=c('MNAirlinePassengerListConfigs').getTranslatedString([r],s);var t=c('React').createElement('div',{className:"_itm"},c('React').createElement('div',{className:"_itn"+(this.props.location===c('MercuryShareAttachmentRenderLocations').CHAT?' '+"_1df7":''),style:{backgroundColor:p}},c('React').createElement(c('MNCommerceLogoHeader.react'),{logo:n.logo,logoPosition:'left',childPosition:'right'},c('React').createElement('div',{className:"_52xz"},o.booking_number_label),c('React').createElement('div',{className:"_52x-"},n.confirmation_number))),c('React').createElement('div',{className:"_ito"},c('React').createElement(c('MNAirlinePassengerList.react'),{cellClassName:"_52x-",columnConfig:s,headerCellClassName:"_52xz",passengerInfo:q}),this.$MNAirlineItineraryMercuryAttachment3(p,o),c('React').createElement(k,{className:"_52y0 _26gz",costLabel:o.total_label,totalCost:n.total_cost,type_:c('MNCommerceFooterTypes').TOTAL}),c('React').createElement(c('Link.react'),null,c('React').createElement('div',{className:"_itp _52y0",onClick:this.$MNAirlineItineraryMercuryAttachment1,role:'presentation',style:{color:p}},o.view_details_cta_label)),c('React').createElement(c('MNAirlineItineraryDetailsDialog.react'),{itinerary:n,location:this.props.location,shown:this.state.dialogShown,onToggle:this.$MNAirlineItineraryMercuryAttachment2,loading:false})));return t;};m.propTypes={attachment:c('MercuryShareAttachmentReactShape'),maxWidth:l.number,location:l.oneOf(c('MercuryShareAttachmentRenderLocations').getValues())};f.exports=m;}),null);
__d('MNCommerceAddress.react',['React'],(function a(b,c,d,e,f,g){'use strict';var h,i,j=c('React').PropTypes;h=babelHelpers.inherits(k,c('React').Component);i=h&&h.prototype;function k(){var l,m;for(var n=arguments.length,o=Array(n),p=0;p<n;p++)o[p]=arguments[p];return m=(l=i.constructor).call.apply(l,[this].concat(o)),this.$MNCommerceAddress2=function(){if(!this.props.address)return c('React').createElement('div',null,this.$MNCommerceAddress3());return c('React').createElement('div',null,this.$MNCommerceAddress3(),c('React').createElement('div',null,this.props.address.street_1),c('React').createElement('div',null,this.props.address.street_2),c('React').createElement('div',null,this.$MNCommerceAddress4()));}.bind(this),this.$MNCommerceAddress4=function(){var q=null;if(this.props.address.city)q=this.props.address.city;if(this.props.address.state){q+=q?', ':'';q+=this.props.address.state;}if(this.props.address.postal_code){q+=q?' ':'';q+=this.props.address.postal_code;}return q;}.bind(this),this.$MNCommerceAddress1=function(){return c('React').createElement('div',null,this.$MNCommerceAddress3(),c('React').createElement('div',null,this.props.rawAddress));}.bind(this),this.$MNCommerceAddress3=function(){if(this.props.name)return c('React').createElement('div',null,this.props.name);return null;}.bind(this),m;}k.prototype.render=function(){if(this.props.rawAddress)return this.$MNCommerceAddress1();return this.$MNCommerceAddress2();};k.propTypes={name:j.string,rawAddress:j.string,address:j.shape({street_1:j.string,street_2:j.string,city:j.string,state:j.string,postal_code:j.string})};f.exports=k;}),null);
__d('MNCommerceBubbleSection.react',['cx','React'],(function a(b,c,d,e,f,g,h){'use strict';var i,j,k=c('React').PropTypes;i=babelHelpers.inherits(l,c('React').Component);j=i&&i.prototype;l.prototype.render=function(){var m=null;if(this.props.label)m=c('React').createElement('p',{className:"_1qpc"},this.props.label);return c('React').createElement('div',{className:"_1qpd"},m,this.props.children);};function l(){i.apply(this,arguments);}l.propTypes={label:k.string};f.exports=l;}),null);
__d('MNCommerceViewTypes',['keyMirror'],(function a(b,c,d,e,f,g){var h=c('keyMirror')({BUBBLE:null,DETAIL:null});f.exports=h;}),null);
__d('MNCommerceItemList.react',['cx','fbt','List.react','MNCommerceSingleListItem.react','MNCommerceViewTypes','React','getOwnObjectValues'],(function a(b,c,d,e,f,g,h,i){'use strict';var j,k,l=c('React').PropTypes,m=2,n=10;j=babelHelpers.inherits(o,c('React').Component);k=j&&j.prototype;function o(){var p,q;for(var r=arguments.length,s=Array(r),t=0;t<r;t++)s[t]=arguments[t];return q=(p=k.constructor).call.apply(p,[this].concat(s)),this.$MNCommerceItemList1=function(u){var v=this.props,w=v.imageDimension,x=v.items,y=x.map(function(z){return c('React').createElement('li',{key:z.id,className:"_24rx"+(this.props.size==='large'?' '+"_1n5y":''),style:{width:this.props.width}},c('React').createElement(c('MNCommerceSingleListItem.react'),babelHelpers['extends']({imageDimension:w,size:this.props.size,width:this.props.width,statusType:z.status_type},z)));}.bind(this)).slice(0,u);return y;}.bind(this),q;}o.prototype.render=function(){var p=void 0;switch(this.props.viewType){case c('MNCommerceViewTypes').DETAIL:p=n;break;case c('MNCommerceViewTypes').BUBBLE:p=m;break;}var q=this.$MNCommerceItemList1(p),r=this.props.items.length;if(r>p)q.push(c('React').createElement('li',{key:'andMore',className:"_24ry",style:{width:this.props.width}},i._("And {Number of items not visible} more",[i.param('Number of items not visible',r-p)])));return c('React').createElement('div',null,c('React').createElement(c('List.react'),{border:'none',spacing:'none'},q));};o.propTypes={items:l.array,imageDimension:l.number.isRequired,size:l.oneOf(['large','small']),width:l.number,viewType:l.oneOf(c('getOwnObjectValues')(c('MNCommerceViewTypes'))).isRequired};f.exports=o;}),null);
__d('mergeDeepInto',['invariant','mergeHelpers'],(function a(b,c,d,e,f,g,h){'use strict';var i=c('mergeHelpers').ArrayStrategies,j=c('mergeHelpers').checkArrayStrategy,k=c('mergeHelpers').checkMergeArrayArgs,l=c('mergeHelpers').checkMergeLevel,m=c('mergeHelpers').checkMergeObjectArgs,n=c('mergeHelpers').isTerminal,o=c('mergeHelpers').normalizeMergeArg,p=function t(u,v,w,x){m(u,v);l(x);var y=v?Object.keys(v):[];for(var z=0;z<y.length;z++){var aa=y[z];r(u,v,aa,w,x);}},q=function t(u,v,w,x){k(u,v);l(x);if(w===i.Concat){u.push.apply(u,v);}else{var y=Math.max(u.length,v.length);for(var z=0;z<y;z++)r(u,v,z,w,x);}},r=function t(u,v,w,x,y){var z=v[w],aa=Object.prototype.hasOwnProperty.call(v,w),ba=aa&&n(z),ca=aa&&Array.isArray(z),da=aa&&!ca&&!ca,ea=u[w],fa=Object.prototype.hasOwnProperty.call(u,w),ga=fa&&n(ea),ha=fa&&Array.isArray(ea),ia=fa&&!ha&&!ha;if(ga){if(ba){u[w]=z;}else if(ca){u[w]=[];q(u[w],z,x,y+1);}else if(da){u[w]={};p(u[w],z,x,y+1);}else if(!aa)u[w]=ea;}else if(ha){if(ba){u[w]=z;}else if(ca){i[x]||h(0);if(x===i.Clobber)ea.length=0;q(ea,z,x,y+1);}else if(da){u[w]={};p(u[w],z,x,y+1);}else !aa;}else if(ia){if(ba){u[w]=z;}else if(ca){u[w]=[];q(u[w],z,x,y+1);}else if(da){p(ea,z,x,y+1);}else !aa;}else if(!fa)if(ba){u[w]=z;}else if(ca){u[w]=[];q(u[w],z,x,y+1);}else if(da){u[w]={};p(u[w],z,x,y+1);}else !aa;},s=function t(u,v,w){var x=o(v);j(w);p(u,x,w,0);};f.exports=s;}),null);
__d('mergeDeep',['mergeDeepInto','mergeHelpers'],(function a(b,c,d,e,f,g){'use strict';var h=c('mergeHelpers').checkArrayStrategy,i=c('mergeHelpers').checkMergeObjectArgs,j=c('mergeHelpers').normalizeMergeArg,k=function l(m,n,o){var p=j(m),q=j(n);i(p,q);h(o);var r={};c('mergeDeepInto')(r,p,o);c('mergeDeepInto')(r,q,o);return r;};f.exports=k;}),null);
__d('MNCommerceOrderDetailsDialog.react',['cx','fbt','MNCommerceAddress.react','MNCommerceAttachmentConstants','MNCommerceDetailSection.react','MNCommerceDetailsDialog.react','MNCommerceItemList.react','MNCommerceLogoHeader.react','MNCommerceViewTypes','React','XUIText.react','mergeDeep'],(function a(b,c,d,e,f,g,h,i){'use strict';var j,k,l=c('React').PropTypes,m=[c('MNCommerceAttachmentConstants').ORDER_DETAIL.SUB_TOTAL,c('MNCommerceAttachmentConstants').ORDER_DETAIL.SHIPPING,c('MNCommerceAttachmentConstants').ORDER_DETAIL.TAX,c('MNCommerceAttachmentConstants').ORDER_DETAIL.TOTAL],n={};n[c('MNCommerceAttachmentConstants').ORDER_DETAIL.SUB_TOTAL]=i._("Subtotal");n[c('MNCommerceAttachmentConstants').ORDER_DETAIL.SHIPPING]=i._("Shipping and handling");n[c('MNCommerceAttachmentConstants').ORDER_DETAIL.TAX]=i._("Estimated tax");n[c('MNCommerceAttachmentConstants').ORDER_DETAIL.TOTAL]=i._("Total");j=babelHelpers.inherits(o,c('React').Component);k=j&&j.prototype;function o(q,r){k.constructor.call(this,q,r);p.call(this);this.state=this.$MNCommerceOrderDetailsDialog1(q);}o.prototype.componentWillReceiveProps=function(q){this.setState(this.$MNCommerceOrderDetailsDialog1(q));};o.prototype.render=function(){var q=i._("Order details"),r=i._("Your order details couldn't be shown.");return c('React').createElement(c('MNCommerceDetailsDialog.react'),babelHelpers['extends']({errorMessage:r,title:q},this.props),this.$MNCommerceOrderDetailsDialog3());};o.propTypes={receipt:l.object,shown:l.bool.isRequired,error:l.object,loading:l.bool.isRequired,onTryAgain:l.func};o.defaultProps={shown:false};var p=function q(){this.$MNCommerceOrderDetailsDialog1=function(r){if(!r.receipt)return {};var s=r.receipt,t=Array.isArray(s.structured_address)?null:s.structured_address;return {address:t,items:this.$MNCommerceOrderDetailsDialog2(s.items),logo:s.partner_logo?{height:s.partner_logo.height,width:s.partner_logo.width,src:s.partner_logo.url}:null,merchant_name:s.merchant_name,name:s.recipient_name,orderDate:s.order_time,orderNumber:s.order_id,orderStatus:s.status,payment:s.payment_method,rawAddress:s.address,shippingCost:s.shipping_cost,subTotal:s.subtotal,tax:s.total_tax,totalCost:s.total_cost};}.bind(this);this.$MNCommerceOrderDetailsDialog3=function(){if(!this.props.receipt||this.props.loading||this.props.error)return null;return c('React').createElement('div',{className:"_4vx2"},this.$MNCommerceOrderDetailsDialog4(),this.$MNCommerceOrderDetailsDialog5(),c('React').createElement('div',{className:"_2hsz"}),c('React').createElement('div',null,c('React').createElement(c('MNCommerceDetailSection.react'),{className:"_4vx4 _4vx5",headerLabel:i._("Ordered on")},this.state.orderDate),c('React').createElement(c('MNCommerceDetailSection.react'),{className:"_4vx4",headerLabel:i._("Deliver to")},c('React').createElement(c('MNCommerceAddress.react'),{name:this.state.name,address:this.state.address,rawAddress:this.state.rawAddress})),c('React').createElement(c('MNCommerceDetailSection.react'),{className:"_4vx4",headerLabel:i._("Paid with")},this.state.payment),c('React').createElement(c('MNCommerceDetailSection.react'),{className:"_4vx4",headerLabel:i._("Summary")},this.$MNCommerceOrderDetailsDialog6())),c('React').createElement('div',{className:"_4vx6"},i._("Order number: {order number}",[i.param('order number',this.state.orderNumber)])));}.bind(this);this.$MNCommerceOrderDetailsDialog2=function(r){if(!r)return null;var s=Object.keys(r).map(function(t){var u=r[t],v=c('mergeDeep')({},u);v.id=t;v.thumbURL=u.thumb_url;return v;});return s;};this.$MNCommerceOrderDetailsDialog4=function(){if(!this.state.logo&&!this.state.merchant_name)return null;var r=null;if(this.state.merchant_name){r=c('React').createElement(c('XUIText.react'),{display:'inline',size:'xlarge',weight:'bold'},this.state.merchant_name);}else r=c('React').createElement(c('MNCommerceLogoHeader.react'),{logo:this.state.logo,logoPosition:'left'});return c('React').createElement('div',{className:"_4vx3"},r);}.bind(this);this.$MNCommerceOrderDetailsDialog5=function(){var r=c('MNCommerceAttachmentConstants').DIALOG.WIDTH-2*c('MNCommerceAttachmentConstants').DIALOG.PADDING;return c('React').createElement('div',{className:"_39yr"},c('React').createElement(c('MNCommerceItemList.react'),{imageDimension:c('MNCommerceAttachmentConstants').XLARGE_IMAGE_DIMENSION,items:this.state.items,size:'large',viewType:c('MNCommerceViewTypes').DETAIL,width:r}));}.bind(this);this.$MNCommerceOrderDetailsDialog6=function(){var r=m.map(function(v){var w=this.state[v];return c('React').createElement('div',{className:v==='totalCost'?"_4vx9":'',key:v},c('React').createElement('div',{className:"_4vx5"},n[v]),c('React').createElement('div',{className:"_4vx5"},w||'--'));}.bind(this)),s=this.props.receipt&&this.props.receipt.adjustments;for(var t=s.length-1;t>=0;t--){var u=s[t];r.splice(2,0,c('React').createElement('div',{key:u.adjustment_type},c('React').createElement('div',{className:"_4vx5"},u.adjustment_type),c('React').createElement('div',{className:"_4vx5"},u.display_adjustment_amount||'--')));}return r;}.bind(this);};f.exports=o;}),null);
__d("XMNCommerceOrderDetailsController",["XController"],(function a(b,c,d,e,f,g){f.exports=c("XController").create("\/messages\/commerce\/order_details\/",{receipt_id:{type:"String",required:true}});}),null);
__d('MNCommerceReceiptDataManager',['AsyncRequest','MNCommerceReceiptActions','XMNCommerceOrderDetailsController'],(function a(b,c,d,e,f,g){'use strict';h.prototype.fetchReceipt=function(i){var j=c('XMNCommerceOrderDetailsController').getURIBuilder().setString('receipt_id',i).getURI();new (c('AsyncRequest'))().setURI(j).setHandler(this.$MNCommerceReceiptDataManager1).setErrorHandler(this.$MNCommerceReceiptDataManager2).send();};h.prototype.$MNCommerceReceiptDataManager1=function(i){c('MNCommerceReceiptActions').receiptLoaded(i.payload);};h.prototype.$MNCommerceReceiptDataManager2=function(i){var j=i.getRequest().uri.getQueryData(),k=j.receipt_id;c('MNCommerceReceiptActions').receiptLoadError(k);};function h(){}f.exports=new h();}),null);
__d('MNCommerceReceiptStore',['Cache','FluxStore','LoadObject','MessengerDispatcher','MNCommerceActionTypes','MNCommerceCacheTimeoutLimits','MNCommerceReceiptDataManager'],(function a(b,c,d,e,f,g){'use strict';var h,i;h=babelHelpers.inherits(j,c('FluxStore'));i=h&&h.prototype;function j(){i.constructor.call(this,c('MessengerDispatcher'));this.$MNCommerceReceiptStore1=new (c('Cache'))();}j.prototype.__onDispatch=function(k){var l=k.type,m=k.receiptID;switch(l){case c('MNCommerceActionTypes').RECEIPT.LOADED:var n=k.receipt;this.$MNCommerceReceiptStore1.set(n.receipt_id,c('LoadObject').empty().setValue(n),null,c('MNCommerceCacheTimeoutLimits').SUCCESS_TIMEOUT);this.__emitChange();break;case c('MNCommerceActionTypes').RECEIPT.LOAD_ERROR:this.$MNCommerceReceiptStore1.set(m,c('LoadObject').empty().setError(new Error('Unable to load receipt: '+m)),null,c('MNCommerceCacheTimeoutLimits').ERROR_TIMEOUT);this.__emitChange();break;case c('MNCommerceActionTypes').RECEIPT.RELOAD:if(m){this.$MNCommerceReceiptStore1.set(m,c('LoadObject').loading());c('MNCommerceReceiptDataManager').fetchReceipt(m);}this.__emitChange();break;}};j.prototype.getReceipt=function(k){if(k&&!this.$MNCommerceReceiptStore1.has(k)){this.$MNCommerceReceiptStore1.set(k,c('LoadObject').loading().setValue({receiptID:k}));c('MNCommerceReceiptDataManager').fetchReceipt(k);}return this.$MNCommerceReceiptStore1.get(k)||c('LoadObject').empty();};f.exports=new j();}),null);
__d('MNCommerceOrderDetailsDialogContainer.react',['BanzaiLogger','MNCommerceDialogStateActions','MNCommerceDialogStateStore','MNCommerceLoggingConstants','MNCommerceLoggerEvents','MNCommerceOrderDetailsDialog.react','MNCommerceReceiptActions','MNCommerceReceiptStore','PureStoreBasedStateMixin','React'],(function a(b,c,d,e,f,g){'use strict';var h=c('React').createClass({displayName:'MNCommerceOrderDetailsDialogContainer',mixins:[c('PureStoreBasedStateMixin')(c('MNCommerceReceiptStore'))],statics:{calculateState:function i(){var j=c('MNCommerceDialogStateStore').getState(),k=null;if(j)k=j.receiptID;var l=c('MNCommerceReceiptStore').getReceipt(k);if(!l.isLoading())c('BanzaiLogger').log('MessengerCommerceLoggerConfig',{event:l.hasError()?c('MNCommerceLoggerEvents').DIALOG_LOAD_ERROR:c('MNCommerceLoggerEvents').DIALOG_LOAD_SUCCESS,debug_data:JSON.stringify({dialog_surface:c('MNCommerceLoggingConstants').DIALOG_SURFACE.RECEIPT,receipt_id:k})});return {shown:!!j,loading:l.isLoading(),receiptID:k,receipt:l.getValue(),error:l.getError()};}},render:function i(){return c('React').createElement(c('MNCommerceOrderDetailsDialog.react'),{loading:this.state.loading,error:this.state.error,onToggle:this._onToggle,onTryAgain:this._onTryAgainClick,shown:this.state.shown,receipt:this.state.receipt});},_onToggle:function i(j){if(!j){c('BanzaiLogger').log('MessengerCommerceLoggerConfig',{event:c('MNCommerceLoggerEvents').DIALOG_CLOSED,debug_data:JSON.stringify({dialog_surface:c('MNCommerceLoggingConstants').DIALOG_SURFACE.RECEIPT,receipt_id:this.state.receipt.receipt_id})});c('MNCommerceDialogStateActions').hideDialog();}},_onTryAgainClick:function i(){c('MNCommerceReceiptActions').receiptReload(this.state.receiptID);}});f.exports=h;}),null);
__d('MNCommerceAttachmentUtils',[],(function a(b,c,d,e,f,g){'use strict';var h={shouldRenderMap:function i(j,k){return !!j&&j.latitude&&j.longitude&&!!k;},getDestinationAddressString:function i(j){if(!j)return null;var k=j.street_1;if(!!j.city)k=k+' '+j.city+',';if(!!j.state)k=k+' '+j.state;return k;}};f.exports=h;}),null);
__d('MNCommerceReceiptMercuryAttachment.react',['fbt','cx','LeftRight.react','MNCommerceFooterTypes','MNCommerceItemList.react','MNCommerceAttachmentConstants','MNCommerceAttachmentUtils','MNCommerceLogoHeader.react','MNCommerceBubbleSection.react','mNCommerceTotalCostFooterReact','MNCommerceViewTypes','MercuryShareAttachmentRenderLocations','XUIGrayText.react','XUIText.react','React','joinClasses'],(function a(b,c,d,e,f,g,h,i){'use strict';var j,k,l=c('mNCommerceTotalCostFooterReact').jsComponent,m=c('React').PropTypes;j=babelHelpers.inherits(n,c('React').Component);k=j&&j.prototype;n.prototype.render=function(){return c('React').createElement('div',{className:c('joinClasses')("_1xjh"+(this.props.location===c('MercuryShareAttachmentRenderLocations').WEB_INBOX?' '+"_1hf9":''),this.props.className),onClick:this.props.onAttachmentClick,role:'presentation'},this.$MNCommerceReceiptMercuryAttachment1(),c('React').createElement('div',{className:"_xmt"},c('React').createElement(c('MNCommerceBubbleSection.react'),null,this.$MNCommerceReceiptMercuryAttachment2()),this.$MNCommerceReceiptMercuryAttachment3(),this.$MNCommerceReceiptMercuryAttachment4()),c('React').createElement('div',{className:"_xmx"},c('React').createElement(l,{totalCost:this.props.totalCost,type_:c('MNCommerceFooterTypes').TOTAL})));};n.prototype.$MNCommerceReceiptMercuryAttachment1=function(){if(!this.props.logo&&!this.props.merchant_name)return null;var o=null;if(this.props.merchant_name){o=c('React').createElement(c('LeftRight.react'),null,c('React').createElement(c('XUIGrayText.react'),{display:'inline',shade:'light',size:'small'},this.$MNCommerceReceiptMercuryAttachment5()),c('React').createElement('div',{className:"_37oe"},c('React').createElement(c('XUIText.react'),{size:'xlarge',weight:'bold'},this.props.merchant_name)));}else o=c('React').createElement(c('MNCommerceLogoHeader.react'),{logo:this.props.logo,logoPosition:'right'},this.$MNCommerceReceiptMercuryAttachment5());return c('React').createElement('div',{className:"_4vx3"},o);};n.prototype.$MNCommerceReceiptMercuryAttachment5=function(){return h._("Order confirmation");};n.prototype.$MNCommerceReceiptMercuryAttachment3=function(){if(!this.props.payment_method)return null;return c('React').createElement(c('MNCommerceBubbleSection.react'),{label:h._("Paid with")},this.props.payment_method);};n.prototype.$MNCommerceReceiptMercuryAttachment4=function(){var o=c('MNCommerceAttachmentUtils').getDestinationAddressString(this.props.structured_address);if(!o)return null;return c('React').createElement(c('MNCommerceBubbleSection.react'),{label:h._("Deliver to")},o);};n.prototype.$MNCommerceReceiptMercuryAttachment2=function(){if(!this.props.items.length)return null;var o=this.props.width-2*c('MNCommerceAttachmentConstants').BUBBLE_PADDING,p={size:'small',width:o};return c('React').createElement(c('MNCommerceItemList.react'),babelHelpers['extends']({items:this.props.items,imageDimension:c('MNCommerceAttachmentConstants').LARGE_IMAGE_DIMENSION,viewType:c('MNCommerceViewTypes').BUBBLE},p));};function n(){j.apply(this,arguments);}n.propTypes={items:m.array.isRequired,location:m.oneOf(c('MercuryShareAttachmentRenderLocations').getValues()),logo:m.object,merchant_name:m.string,payment_method:m.string,totalCost:m.string,width:m.number,onAttachmentClick:m.func,status:m.string,recipient_name:m.string,structured_address:m.object};f.exports=n;}),null);
__d('MNCommerceReceiptMercuryShareAttachment.react',['BanzaiLogger','MercuryShareAttachmentReactShape','MNCommerceDialogStateActions','MNCommerceLoggingConstants','MNCommerceLoggerEvents','MNCommerceOrderDetailsDialogContainer.react','MNCommerceReceiptMercuryAttachment.react','React','idx','mergeDeep'],(function a(b,c,d,e,f,g){'use strict';var h,i,j=c('React').PropTypes;h=babelHelpers.inherits(k,c('React').PureComponent);i=h&&h.prototype;function k(){var l,m;for(var n=arguments.length,o=Array(n),p=0;p<n;p++)o[p]=arguments[p];return m=(l=i.constructor).call.apply(l,[this].concat(o)),this.$MNCommerceReceiptMercuryShareAttachment1=function(){c('BanzaiLogger').log('MessengerCommerceLoggerConfig',{event:c('MNCommerceLoggerEvents').DIALOG_OPENED,debug_data:JSON.stringify({dialog_surface:c('MNCommerceLoggingConstants').DIALOG_SURFACE.RECEIPT,receipt_id:this.props.attachment.target.receipt_id})});c('MNCommerceDialogStateActions').showDialog(c('MNCommerceOrderDetailsDialogContainer.react'),{receiptID:this.props.attachment.target.receipt_id});}.bind(this),m;}k.prototype.render=function(){var l,m=this.props.attachment,n=[],o=((l=m)!=null?(l=l.target)!=null?l.items:l:l)||{};Object.keys(o).forEach(function(r){var s=o[r],t=c('mergeDeep')({},s);t.id=r;t.thumbURL=s.thumb_url;n.push(t);});var p=null;if(!Array.isArray(m.target.structured_address))p=m.target.structured_address;var q={items:n,totalCost:m.target.total_cost,width:this.props.maxWidth,onAttachmentClick:this.$MNCommerceReceiptMercuryShareAttachment1,location:this.props.location,logo:m.target.partner_logo?{height:m.target.partner_logo.height,width:m.target.partner_logo.width,src:m.target.partner_logo.url}:null,merchant_name:m.target.merchant_name,payment_method:m.target.payment_method,status:m.target.status,recipient_name:m.target.recipient_name,structured_address:p};return c('React').createElement(c('MNCommerceReceiptMercuryAttachment.react'),q);};k.propTypes={attachment:c('MercuryShareAttachmentReactShape'),maxWidth:j.number};f.exports=k;}),null);