if (self.CavalryLogger) { CavalryLogger.start_js(["CQHYN"]); }

__d("LiveLocationStopReason",[],(function a(b,c,d,e,f,g){f.exports={EXPIRED:1,CANCELED:2,ARRIVED:3};}),null);
__d('GeoMarkerIcon',['ImmutableObject'],(function a(b,c,d,e,f,g){'use strict';var h,i;h=babelHelpers.inherits(j,c('ImmutableObject'));i=h&&h.prototype;function j(k,l,m){i.constructor.call(this,{iconPath:k,anchorU:l,anchorV:m});}f.exports=j;}),null);
__d('GeoMarker',['GeoCoordinates','GeoMarkerIcon','ImmutableObject'],(function a(b,c,d,e,f,g){'use strict';var h,i;h=babelHelpers.inherits(j,c('ImmutableObject'));i=h&&h.prototype;function j(k){var l=arguments.length<=1||arguments[1]===undefined?null:arguments[1];i.constructor.call(this,{position:k,icon:l});}f.exports=j;}),null);
__d('GeoPath',['GeoCoordinates','ImmutableObject'],(function a(b,c,d,e,f,g){'use strict';var h,i;h=babelHelpers.inherits(j,c('ImmutableObject'));i=h&&h.prototype;function j(k){var l=arguments.length<=1||arguments[1]===undefined?null:arguments[1],m=arguments.length<=2||arguments[2]===undefined?null:arguments[2],n=arguments.length<=3||arguments[3]===undefined?null:arguments[3],o=arguments.length<=4||arguments[4]===undefined?null:arguments[4],p=arguments.length<=5||arguments[5]===undefined?null:arguments[5];i.constructor.call(this,{points:k,weightPx:l,color:m,fillColor:n,route:o,dashed:p});}f.exports=j;}),null);
__d('MeasuredComponent.react',['EventListener','React','ReactDOM','SubscriptionsHandler','emptyFunction','requestAnimationFrame'],(function a(b,c,d,e,f,g){var h,i,j=c('React').PropTypes;h=babelHelpers.inherits(k,c('React').Component);i=h&&h.prototype;function k(){var l,m;'use strict';for(var n=arguments.length,o=Array(n),p=0;p<n;p++)o[p]=arguments[p];return m=(l=i.constructor).call.apply(l,[this].concat(o)),this.attachEventListeners=function(q){this.$MeasuredComponent1.engage();c('SubscriptionsHandler').prototype.addSubscriptions.apply(this.$MeasuredComponent1,q.map(function(r){return c('EventListener').listen(b,r,this.measure);}.bind(this)));}.bind(this),this.detachEventListeners=function(){this.$MeasuredComponent1.release();}.bind(this),this.measure=function(){var q=c('ReactDOM').findDOMNode(this).getBoundingClientRect();this.props.onMeasure(q);}.bind(this),m;}k.prototype.componentWillReceiveProps=function(l){'use strict';if(l.measureOnEvents!==this.props.measureOnEvents){this.detachEventListeners();this.attachEventListeners(l.measureOnEvents);}};k.prototype.componentDidUpdate=function(l,m){'use strict';if(this.props.shouldRemeasure(l.children,this.props.children))this.measure();};k.prototype.componentDidMount=function(){'use strict';this.$MeasuredComponent1=new (c('SubscriptionsHandler'))();this.attachEventListeners(this.props.measureOnEvents);c('requestAnimationFrame')(this.measure);};k.prototype.componentWillUnmount=function(){'use strict';this.detachEventListeners();this.$MeasuredComponent1=null;};k.prototype.render=function(){'use strict';return c('React').Children.only(this.props.children);};k.propTypes={onMeasure:j.func.isRequired,measureOnEvents:j.array,shouldRemeasure:j.func};k.defaultProps={onMeasure:c('emptyFunction'),measureOnEvents:['resize','orientationchange'],shouldRemeasure:c('emptyFunction').thatReturnsFalse};f.exports=k;}),null);
__d('StaticGeoMapBase.react',['cx','CurrentLocale','GeoCoordinates','GeoMarker','GeoPath','GeoRectangle','MeasuredComponent.react','React','TilesMapConfig','URI','joinClasses'],(function a(b,c,d,e,f,g,h){'use strict';var i,j,k=c('React').PropTypes,l=1.5,m=1,n=2;i=babelHelpers.inherits(o,c('React').Component);j=i&&i.prototype;function o(){var p,q;for(var r=arguments.length,s=Array(r),t=0;t<r;t++)s[t]=arguments[t];return q=(p=j.constructor).call.apply(p,[this].concat(s)),this.state={size:{width:0,height:0}},this.$StaticGeoMapBase1=function(u){this.setState({size:u});if(this.props.onMapSizeChanged)this.props.onMapSizeChanged(this.state.size);}.bind(this),this.$StaticGeoMapBase2=function(u,v){return u!=null&&v!=null&&(u.props.style.width!==v.props.style.width||u.props.style.height!==v.props.style.height);},q;}o.getMapImageURI=function(p){if(p.size.width===0||p.size.height===0)return null;var q=new (c('URI'))(c('TilesMapConfig').STATIC_MAP_URL_TEMPLATE).addQueryData('size',p.size.width+'x'+p.size.height).addQueryData('language',c('CurrentLocale').get()),r=window.devicePixelRatio||c('TilesMapConfig').DEVICE_PIXEL_RATIO,s=r<l?m:n;q.addQueryData('scale',s);if(p.zoom!=null)q.addQueryData('zoom',p.zoom);if(p.boundingBox!=null){q.addQueryData('visible',p.boundingBox.n+','+p.boundingBox.w+'|'+p.boundingBox.s+','+p.boundingBox.e);}else if(p.center!=null)q.addQueryData('center',p.center.latitude+','+p.center.longitude);if(p.markers!=null&&p.markers.length>0)q.addQueryData('marker_list',p.markers.map(function(t){return (t.icon==null?'':'icon:'+t.icon.iconPath+'|anchor:'+t.icon.anchorU+','+t.icon.anchorV+'|')+t.position.latitude+','+t.position.longitude;}));if(p.paths!=null&&p.paths.length>0)q.addQueryData('paths',p.paths.map(function(t){var u=[];if(t.color!==null){var v=t.color.toString(16).toUpperCase();v='0'.repeat(8-v.length)+v;u.push('color:0x'+v);}if(t.fillColor!==null){var w=t.fillColor.toString(16).toUpperCase();w='0'.repeat(8-w.length)+w;u.push('fillcolor:0x'+w);}if(t.weightPx!==null)u.push('weight:'+t.weightPx);if(t.route!==null)u.push('route:'+t.route);for(var x=0;x<t.points.length;x++){var y=t.points[x];u.push(y.latitude+','+y.longitude);}return u.join('|');}));return q;};o.prototype.render=function(){var p=o.getMapImageURI({size:this.state.size,zoom:this.props.zoom,boundingBox:this.props.boundingBox,center:this.props.center,markers:this.props.markers,paths:this.props.paths}),q=this.props,r=q.width,s=q.height,t=q.center,u=q.zoom,v=q.boundingBox,w=q.markers,x=q.paths,y=babelHelpers.objectWithoutProperties(q,['width','height','center','zoom','boundingBox','markers','paths']);return c('React').createElement(c('MeasuredComponent.react'),{onMeasure:this.$StaticGeoMapBase1,shouldRemeasure:this.$StaticGeoMapBase2},c('React').createElement('div',babelHelpers['extends']({},y,{className:c('joinClasses')(this.props.className,"_56x5"),style:{width:this.props.width,height:this.props.height,backgroundRepeat:'no-repeat',backgroundSize:'100% 100%',backgroundImage:p==null?'none':'url('+p.toString()+')'}}),this.props.children));};o.propTypes={width:k.any.isRequired,height:k.any.isRequired,source:k.string.isRequired,center:k.instanceOf(c('GeoCoordinates')),zoom:k.number,boundingBox:k.instanceOf(c('GeoRectangle')),markers:k.arrayOf(k.instanceOf(c('GeoMarker'))),paths:k.arrayOf(k.instanceOf(c('GeoPath')))};f.exports=o;}),null);
__d('MercuryMessageLiveLocationShareAttachmentGenerator',['fbt','DateConsts','GeoCoordinates','GeoMarker','LiveLocationStopReason','MercuryIDs','MercuryParticipants','MercuryViewer','StaticGeoMapBase.react','URI','formatDate','keyMirror'],(function a(b,c,d,e,f,g,h){'use strict';var i=c('keyMirror')(c('LiveLocationStopReason')),j=545,k=280,l=15,m={generateShareAttachment:function ba(ca,da){var ea=aa(ca);return babelHelpers['extends']({},da,{target:ca,title:n(ca).toString(),description:s(ca).toString(),media:babelHelpers['extends']({},da.media,{image:ea&&ea.toString()||'',image_size:{width:j,height:k}}),uri:''});}};function n(ba){if(ba.is_expired){return p(ba);}else return o(ba);}function o(ba){if(ba.location_title){return ba.location_title;}else return h._("Live Location");}function p(ba){var ca=ba.sender_destination;if(ca&&ba.stop_reason===i.ARRIVED)return q(ca,ba.sender.id);return h._("Location-sharing ended");}function q(ba,ca){var da=ba.label,ea=c('MercuryIDs').getParticipantIDFromUserID(ca);if(c('MercuryViewer').isViewer(ea)){if(da){return h._("You arrived at {destination}",[h.param('destination',da)]);}else return h._("You arrived at the destination");}else{var fa=r(ea);if(da!=null){if(fa!=null){return h._("{user} arrived at {destination}",[h.param('user',fa),h.param('destination',da)]);}else return h._("Arrived at {destination}",[h.param('destination',da)]);}else if(fa!=null){return h._("{user} arrived at the destination",[h.param('user',fa)]);}else return h._("Arrived at the destination");}}function r(ba){var ca=c('MercuryParticipants').getNow(ba);return ca&&ca.short_name;}function s(ba){if(ba.is_expired){return w(ba);}else{var ca=ba.sender_destination;if(ca){return z(ca);}else return y(ba.expiration_time);}}function t(ba,ca){return ba.getDate()==ba.getDate()&&ba.getMonth()===ca.getMonth()&&ba.getFullYear()===ca.getFullYear();}function u(ba){return new Date(ba*c('DateConsts').MS_PER_SEC);}function v(ba){var ca=new Date(),da=u(ba),ea=ca.getTime()-da.getTime();if(t(ca,da)){return 'g:ia';}else if(ea<c('DateConsts').MS_PER_WEEK){return 'D g:ia';}else return 'M j';}function w(ba){var ca=ba.expiration_time,da=c('formatDate')(ca,v(ca));return h._("Last update {date}",[h.param('date',da)]);}function x(ba){var ca=u(ba).getTime()-Date.now();return Math.ceil(ca/(c('DateConsts').MS_PER_SEC*c('DateConsts').SEC_PER_MIN));}function y(ba){var ca=x(ba);return h._({"*":"Sharing for {number} minutes.","268435456":"Sharing for 1 minute."},[h.plural(ca,'number')]);}function z(ba){if(ba.label){return h._("Sharing until {destination}.",[h.param('destination',ba.label)]);}else return h._("Sharing until destination.");}function aa(ba){var ca=ba.coordinate;if(!ca)return null;var da=new (c('GeoMarker'))(new (c('GeoCoordinates'))(ca.latitude,ca.longitude));return c('StaticGeoMapBase.react').getMapImageURI({size:{width:j,height:k},zoom:l,markers:[da],boundingBox:null,center:null,paths:null});}f.exports=m;}),null);
__d("XPlacesMapController",["XController"],(function a(b,c,d,e,f,g){f.exports=c("XController").create("\/places\/map\/",{id:{type:"Int"},latitude:{type:"Float",defaultValue:0},longitude:{type:"Float",defaultValue:0},address:{type:"StringVector",defaultValue:[]},name:{type:"String"},zoom:{type:"Int"},message_location_id:{type:"Int"},message_live_location_id:{type:"Int"},polygon_page_id:{type:"Int"},dialog_width:{type:"Int"},map_width:{type:"Int"},map_height:{type:"Int"},hide_footer:{type:"Int"},__asyncDialog:{type:"Int"}});}),null);
__d('MercuryMessageLiveLocationShareAttachment.react',['cx','Link.react','MercuryFallbackShareAttachmentContent.react','MercuryMessageLiveLocationShareAttachmentGenerator','MercuryShareAttachmentRenderLocations','MercuryShareAttachmentReactShape','React','XPlacesMapController'],(function a(b,c,d,e,f,g,h){'use strict';var i,j,k=c('React').PropTypes;i=babelHelpers.inherits(l,c('React').Component);j=i&&i.prototype;l.prototype.render=function(){var m=this.props.attachment,n=c('MercuryMessageLiveLocationShareAttachmentGenerator').generateShareAttachment(m.target,m),o=this.renderAttachment(n),p=n.target;if(c('MercuryShareAttachmentRenderLocations').isPreview(this.props.location)||p.is_expired)return o;var q=p.live_location_id,r=c('XPlacesMapController').getURIBuilder().setInt('message_live_location_id',q).getURI();return c('React').createElement(c('Link.react'),{className:"_5rw4",href:n.uri,ajaxify:r,rel:'dialog',target:'_blank'},o);};l.prototype.renderAttachment=function(m){var n=babelHelpers['extends']({},this.props,{attachment:m});return c('React').createElement(c('MercuryFallbackShareAttachmentContent.react'),n);};function l(){i.apply(this,arguments);}l.propTypes={attachment:c('MercuryShareAttachmentReactShape'),location:k.oneOf(c('MercuryShareAttachmentRenderLocations').getValues())};f.exports=l;}),null);
__d('MercuryMessageLocationShareAttachment.react',['cx','Link.react','MercuryFallbackShareAttachmentContent.react','MercuryShareAttachmentRenderLocations','MercuryShareAttachmentReactShape','React','XPlacesMapController'],(function a(b,c,d,e,f,g,h){'use strict';var i,j,k=c('React').PropTypes;i=babelHelpers.inherits(l,c('React').Component);j=i&&i.prototype;function l(){var m,n;for(var o=arguments.length,p=Array(o),q=0;q<o;q++)p[q]=arguments[q];return n=(m=j.constructor).call.apply(m,[this].concat(p)),this.renderLink=function(r){if(c('MercuryShareAttachmentRenderLocations').isPreview(this.props.location))return r;var s=this.props.attachment.deduplication_key,t=c('XPlacesMapController').getURIBuilder().setInt('message_location_id',s).getURI();return c('React').createElement(c('Link.react'),{className:"_5rw4",href:this.props.attachment.uri,ajaxify:t,rel:'dialog',target:'_blank'},r);}.bind(this),n;}l.prototype.render=function(){return this.renderLink(c('React').createElement(c('MercuryFallbackShareAttachmentContent.react'),this.props));};l.propTypes={attachment:c('MercuryShareAttachmentReactShape'),location:k.oneOf(c('MercuryShareAttachmentRenderLocations').getValues())};f.exports=l;}),null);